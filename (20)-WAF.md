
## إيه هو الـ WAF؟
**Web Application Firewall**

واللي هو "جدار حماية للتطبيقات على الإنترنت". ببساطة كده، هو عبارة عن نظام أمان بيحمي المواقع والتطبيقات من الهجمات اللي ممكن تحصل عليها من الإنترنت. هو بيشتغل زي الحارس اللي بيقف بين الموقع بتاعك والمستخدمين، وبيحاول يمنع الهجمات اللي ممكن تخترق الموقع أو تخلي بياناتك في خطر.

---

![image](https://github.com/user-attachments/assets/3a3262d3-9e70-482f-aebd-4ee1ad9cd24d)



## إزاي بيشتغل الـ WAF؟
الـ **WAF** بيشتغل بعدة طرق علشان يكتشف ويحمي ضد الهجمات. خليني أشرح لك كل طريقة:

1. **Signature-Based**:
   - الطريقة دي زي لما بتكون عندك قائمة فيها توقيعات (أنماط) للهجمات المعروفة. زي لما يبقى فيه فيروس محدد ومعروف عندنا، لو جت طلبات من الإنترنت مشابهة لهجوم معروف، الـ WAF هيوقفها.
   - **مثال:** لو حد حاول يكتب جملة زي:
     ```sql
     SELECT * FROM users WHERE username = 'admin' --'
     ```
     ده هجوم من نوع **SQL Injection**. الـ WAF هيتعرف عليه ويوقفه لأن ده هجوم معروف.

2. **Regex-Based**:
   - دي طريقة تانية بيستخدمها الـ WAF علشان يبحث عن نمط معين أو سلوك غير طبيعي في البيانات اللي جايه.
   - **مثال:** لو فيه طلب بيحتوي على كلمات مش طبيعية زي:
     ```bash
     username=admin&password=' OR 1=1 --
     ```
     الـ WAF هيكتشف إن ده طلب مش طبيعي ويوقفه باستخدام التعبيرات المنتظمة.

3. ** Behavior-Based**:
   - الـ WAF ممكن يتابع سلوك المستخدمين ويشوف لو في أي حاجة غريبة بتحصل. زي لو في عدد كبير جدًا من المحاولات للدخول بنفس الحساب.
   - **مثال:** لو حد بيحاول يدخل حسابه 100 مرة في دقيقة واحدة، ده سلوك مش طبيعي، الـ WAF هيوقفه.

4. **Challenge-Based**:
   - الـ WAF بيطلب من المستخدمين إتمام عملية تحقق، زي CAPTCHA، علشان يتأكد إنهم مش روبوتات.
   - **مثال:** لو في حد بيحاول يدخل كتير جدًا من نفس العنوان، ممكن يطلب منه الـ WAF يحل CAPTCHA قبل ما يكمل.

5. **IP Repetition**:
   - لو الـ WAF لاحظ إن نفس العنوان **IP** بيحاول يرسل طلبات متكررة بسرعة، هيمنع أو يوقف الطلبات دي علشان يحمي الموقع.
   - **مثال:** لو حد بيحاول يعمل هجوم **Brute Force** ويعمل محاولات كتير جدًا علشان يكتشف كلمة المرور، الـ WAF هيتعرف على العنوان ده ويوقفه.

6. **Geolocation Filtering**:
   - أحيانًا الـ WAF بيقدر يحدد منين جاي الطلب ده (يعني من أي دولة أو منطقة)، ويمنع الوصول من أماكن مريبة.
   - **مثال:** لو موقعك موجه فقط لمستخدمي مصر، والـ WAF بيقدر يوقف الطلبات اللي جايه من دول تانية.

7. **Rate Limiting**:
   - الـ WAF بيحدد عدد الطلبات اللي ممكن يبعثها أي شخص في وقت معين. يعني مش هيخلي حد يبعت طلبات كثيرة بسرعة.
   - **مثال:** لو في شخص بيحاول يزور الموقع بتاعك بسرعة وبشكل مفرط، الـ WAF هيحدد له وقت معين بين كل زيارة والتانية علشان يحمي الموقع.

8. **Hybrid-Based**:
   - بعض أنظمة الـ WAF بتجمع بين أكتر من طريقة علشان تكون أقوى في حماية الموقع. يعني بيستخدم توقيعات، وسلوكيات، وحماية من الهجمات اللي جايه من أماكن مريبة.

---

## أنماط تشغيل الـ WAF
الـ **WAF** بيشتغل في أكتر من نمط، وكل نمط بيحمي بشكل مختلف:

1. **Inline Mode (النمط المباشر)**:
   - يعني الـ WAF بيكون بين الزوار والموقع بتاعك بشكل مباشر، فكل طلب لازم يمر عليه علشان يتفحص.

2. **Reverse Proxy Mode (النمط العكسي)**:
   - الـ WAF هنا بيكون زي "وكيل" بين الموقع والمستخدمين. يعني هو اللي هيستقبل الطلبات الأول قبل ما توصل للموقع.

3. **Monitoring Mode (النمط المراقب)**:
   - في النمط ده، الـ WAF مش هيمنع الهجمات بشكل مباشر، لكنه هيكون موجود علشان يرصد الأنشطة المشبوهة ويديلك تحذيرات.

---

## إزاي الـ WAF يكتشف الهجمات؟
الـ WAF بيستخدم طرق متنوعة علشان يكتشف الهجمات ويحمي الموقع، زي:

1. **SIEM Solution (حلول إدارة المعلومات والأحداث الأمنية)**:
   - ده بيجمع كل البيانات من الـ WAF ويفحصها علشان يكتشف الأنماط المشبوهة، ويعرف لو فيه هجوم بيحصل على الموقع.

2. **EICAR**:
   - ده ملف اختبار بيستخدمه الباحثين في الأمن علشان يختبروا إذا كان الـ WAF قادر على اكتشاف الفيروسات.

3. **HPP (HTTP Parameter Pollution)**:
   - ده هجوم بيحاول يضيف معلمات أو قيم غير صحيحة في URL عشان يخلّص المعلومات بشكل غير طبيعي. الـ WAF بيكشف ده.

4. **WAF Bypass**:
   - في بعض الأحيان، بيحاول المهاجمين التلاعب أو خداع الـ WAF باستخدام طرق مختلفة علشان يتخطوه، زي استخدام **URL Encoding** أو **Obfuscation**.

5. **Authorization Bypass**:
   - ده بيحاول يتجاوز أنظمة التفويض الخاصة بالموقع، زي لما حد يحاول يفتح صفحة محمية بكلمة مرور من غير إذن.

---

## حماية ضد الهجمات باستخدام الـ WAF

1. **SQL Injection**:
   - ده هجوم بيحاول يدخل أكواد SQL ضارة في الموقع. الـ WAF يكشف ده ويمنع حدوثه.

2. **Cross-Site Scripting (XSS)**:
   - هجوم بيحاول يدخل جافاسكريبت ضار في صفحة ويب. الـ WAF بيكشف ده ويحمي الموقع.

3. **DDOS**:
   - لو فيه هجوم **DDOS**، الـ WAF بيقدر يحمي الموقع عن طريق تحديد عدد الطلبات اللي ممكن تبعت في فترة معينة.

---

## خلاصة
الـ **WAF** هو أداة مهمة جدًا لحماية المواقع والتطبيقات من الهجمات اللي ممكن تيجي من الإنترنت. هو بيستخدم طرق زي التوقيع الرقمي والسلوك غير الطبيعي وعنوان الـ IP علشان يحمي الموقع. وكمان بيعمل من خلال أنماط مختلفة لزيادة الأمان.

